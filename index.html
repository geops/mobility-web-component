<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Mobility Web Component</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <meta
      name="viewport"
      content="initial-scale=1,maximum-scale=1,user-scalable=no"
    />
    <script type="text/javascript">
      if (/localhost/.test(window.location.hostname)) {
        new EventSource("/esbuild").addEventListener("change", () => {
          location.reload();
        });
      }
    </script>
    <script type="module" src="./index.js"></script>
    <script src="./docutils.js"></script>
    <link rel="stylesheet" type="text/css" href="./output.css" />
    <style>
      ::-webkit-scrollbar {
        width: 3px;
        height: 3px;
      }
      a {
        text-decoration: underline;
      }
    </style>
  </head>
  <body class="p-8">
    <!-- tailwind hack to add class used in docutils -->
    <div class="border px-4 py-2 table-auto w-full flex gap-4 p-2 bg-black text-white hover:bg-gray-700" style="display:none;"></div>
    <div id="doc" style="display: none" class="mx-auto max-w-3xl space-y-4">
      <h1 class="text-3xl font-bold">Mobility Web Component</h1>
      <p>This is a demo of the Mobility Web Component.</p>
      <h2 class="text-xl font-bold">Usage example</h2>
      <pre id="code" class="bg-slate-800 text-slate-200 p-4 rounded"></pre>

      <geops-mobility
        class="max-w-3xl h-96 block resize overflow-auto"
      ></geops-mobility>

      <br />
      <h2 class="text-xl font-bold">Attributes</h2>
      <div id="attributes"></div>
      <h2 class="text-xl font-bold">Events</h2>
      <div id="events"></div>
      <br />
      <br />
      <h1 class="text-xl font-bold">More mobility web components</h1>
      <p>
        <a href="search.html" target="_blank"
          >&gt;&gt; Usage example Search Component</a
        >
      </p>
    </div>
    <br />
    <br />
    <script type="text/javascript">
      const pkgSrc = "https://www.unpkg.com/@geops/mobility-web-component";
      const wc = document.querySelector("geops-mobility");

      const attrs = [
          "apikey",
          "baselayer",
          "center",
          "geolocation",
          "mapsurl",
          "mots",
          "notification",
          "notificationat",
          "notificationurl",
          "notificationbeforelayerid",
          "realtime",
          "realtimeUrl",
          "search",
          "tenant",
          "zoom",
          "permalink",
        ];

      const booleanAttrs = [
        "geolocation",
        "notification",
        "realtime",
        "search",
        "permalink",
      ];

      const events = [
        "mwc:stopssearchselect",
        "mwc:attribute",
      ];

      document.querySelector('#attributes').innerHTML = generateAttributesTable(wc, attrs, booleanAttrs);
      document.querySelector('#events').innerHTML = generateEventsTable(wc, events);
      document.querySelector('#code').innerHTML = generateCodeText(wc, attrs, pkgSrc);
      wc.addEventListener('mwc:attribute', (event) => {
        document.querySelector('#code').innerHTML = generateCodeText(wc, attrs, pkgSrc);
      });
      applyPermalinkParameters(wc);
    </script>
  </body>
</html>
